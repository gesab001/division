<html>

<meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Ensures optimal rendering on mobile devices. -->

<head>

<script src="speechrecognition.js"></script>

<script src="app.js"></script>
<link rel="stylesheet" href="style.css">

</head>

<body>

	
<label>Number to Practice</label>

<input type="number" id="numberToPractice"/>
<button id="generateMultiplesButton" onclick="generateMultiples()">Generate Questions</button> 

<br><br>
<div id="answers"></div>
<br><br>
<button id="creatNewQuestion" onclick="newQuestion()">New Question</button>
<br><br>
<button style="z-index: 100"; id="speak" onclick="speakAnswer()">Speak Answer</button>

<div>TOTAL CORRECT: <span id="totalCorrect">0</span></div>

<div id="timer"></div>



<div id="main" style="z-index: -5">
  <span id="question"></span>
  <span> = </span>
	<div id="answer" contenteditable="true">

	</div>

</div>
	<div id="submitAnswer" style="z-index: 5; background-color: green; cursor: pointer; color: white;" onclick="checkAnswer()">SUBMIT</div>

<div style="display: none" id="correctAnswer"></div>


</body>


<script>
var answerNotSubmitted = true;

document.getElementById("answer").addEventListener("keypress", function(event) {
  console.log(event.key);
  if (event.key === "Enter") {
    event.preventDefault();
    checkAnswer();
  }
});
function answerCheckTyping(user_answer){
  var correctAnswer = parseInt(document.getElementById("correctAnswer").innerHTML);
  console.log(user_answer);


  //document.getElementById("answer").textContent= ;

  if (user_answer===correctAnswer){
	  //alert("CORRECT");	
	  var totalCorrect = parseInt(document.getElementById("totalCorrect").innerHTML) + 1;
	  document.getElementById("totalCorrect").innerHTML = totalCorrect;
  }else{
	  //alert("WRONG! THE CORRECT ANSWER IS: " + correctAnswer);
	  var totalCorrect = parseInt(document.getElementById("totalCorrect").innerHTML) - 1;
	  document.getElementById("totalCorrect").innerHTML = totalCorrect;
  }	
}

function checkAnswer(){
 if (answerNotSubmitted){
   var user_answer = parseInt(document.getElementById("answer").innerHTML);
   console.log(user_answer);
   answerCheckTyping(user_answer);
    answerNotSubmitted = false;
 }
}

function generateMultiples(){
  makeMultiples();
}

function speakAnswer(){
  try{
  
   recognition.stop();
  }catch(e){
    console.log(e);
  }
    try{
  
     recognition.start();

  }catch(e){
    console.log(e);
  }
}
function newQuestion(){
  answerNotSubmitted = true;
  document.getElementById("answer").focus();
  createQuestion();
  startTimer();

}
</script>


</html>